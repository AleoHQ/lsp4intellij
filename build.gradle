plugins {
    id "org.jetbrains.intellij" version "0.3.7"
    id "com.github.hierynomus.license" version "0.15.0"
    id "com.github.gradle-git-version-calculator" version "1.1.0"
}

repositories {
    mavenCentral()
}

group = "com.github.lsp4intellij"
version = gitVersionCalculator.calculateVersion("v")

apply plugin: 'org.jetbrains.intellij'
intellij {
    version '2017.3'
    updateSinceUntilBuild false
}

dependencies {
    compile group: 'org.eclipse.lsp4j', name: 'org.eclipse.lsp4j', version: '0.6.0'
    compile group: 'com.vladsch.flexmark', name: 'flexmark', version: '0.34.58'
}

apply plugin: 'java'
sourceSets {
    main {
        java {
            srcDirs = ['src/main/java', 'src/main/gen']
        }
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.8'
}

license {
    header = rootProject.file("resources/license/HEADER.txt")
    ext["year"] = "2018-" + Calendar.getInstance().get(Calendar.YEAR)
    ext["author"] = "WSO2 Inc. (http://www.wso2.org)"
    strictCheck = true
    mapping("java", "SLASHSTAR_STYLE")
    exclude("/**/*.png")
}